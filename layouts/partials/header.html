<!DOCTYPE html>

<html lang="en">

<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    {{ $style := resources.Get "css/style.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $style.RelPermalink }}">
    {{ $style := resources.Get "css/syntax.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $style.RelPermalink }}">
    <meta name="msapplication-TileColor" content="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width" />
    <meta property="og:image" content="https://tonybox.net/img/fb.jpg" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="{{ .Title }}" />
    <meta property="og:url" content="{{ .Permalink }}" />
    <meta property="og:updated_time" content="{{.Date.Format "2006-01-02"}}" />
    {{ if isset .Params "description" }}
    <meta property="og:description" content="{{ .Params.description }}" />
    <meta name="description" content="{{ .Params.description }}" />
    {{ else if .IsHome }}
    <meta name="description" content="{{ .Site.Params.Description }}" />
    {{ end }}

    <script type="text/javascript">

        // Fathom - simple website analytics - https://github.com/usefathom/fathom
        (function (f, a, t, h, o, m) {
            a[h] = a[h] || function () {
                (a[h].q = a[h].q || []).push(arguments)
            };
            o = f.createElement('script'),
                m = f.getElementsByTagName('script')[0];
            o.async = 1; o.src = t; o.id = 'fathom-script';
            m.parentNode.insertBefore(o, m)
        })(document, window, '//notebook.tonybox.net/tracker.js', 'fathom');
        fathom('set', 'siteId', 'LSKXI');
        fathom('trackPageview');

        //{{ if in .Params.plugins "stlviewer" }}
        window.onload = function () {
            STLViewerEnable("stlviewer");
        }
        //{{ end }}


        // Dark Mode
        document.addEventListener('DOMContentLoaded', function () {
            document.body.className = localStorage.getItem("darkmode");
        });

        function toggle_darkmode() {
            var newColor = localStorage.getItem("darkmode") == "dark" ? "light" : "dark";
            localStorage.setItem("darkmode", newColor);
            document.body.className = newColor;
        }

        // Menu Toggle for Mobile
        function toggle_menu() {
            var menu = document.getElementById("menu");
            menu.className = (menu.className == "hidden") ? "shown" : "hidden"
        }
    </script>

    {{ if in .Params.plugins "threejs" }}
    <script src="/plugins/stl/webgl.min.js"></script>
    <script src="/plugins/stl/three.min.js"></script>
    <script src="/plugins/stl/stlloader.min.js"></script>
    <script src="/plugins/stl/orbitcontrols.min.js"></script>
    {{ end }}

    {{ if in .Params.plugins "stlviewer" }}
    <script src="/plugins/stl/stlviewer.js"></script>
    {{ end }}

    <title>{{ .Title }}</title>
</head>

<body>
    {{ partial "menu.html" . }}